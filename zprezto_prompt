function prompt_debian_precmd {
  vcs_info
}

function prompt_debian_precmd_symbol {
  local -r burger=$(printf "\xF0\x9F\x8D\x94")
  local -r coffee=$(printf "\xE2\x98\x95")
  local -r beer=$(printf "\xF0\x9F\x8D\xBA")
  local -r hour=$(strftime %-k $EPOCHSECONDS)
  if (( $hour >= 8 && $hour < 16 )); then
    _prompt_symbol="$coffee "
  elif (( $hour >= 16 && $hour < 19 )); then
    _prompt_symbol="$burger "
  else
    _prompt_symbol="$beer "
  fi
}

function prompt_debian_setup {
  setopt LOCAL_OPTIONS
  unsetopt XTRACE KSH_ARRAYS
  prompt_opts=(cr percent subst)

  # Load required functions.
  autoload -Uz colors && colors
  autoload -Uz add-zsh-hook
  autoload -Uz vcs_info

  # Add hook for calling vcs_info before each command.
  add-zsh-hook precmd prompt_debian_precmd

  # Set vcs_info parameters.
  zstyle ':vcs_info:*' enable git
  zstyle ':vcs_info:*' formats ' %F{red}%b%c%f'

  # Prefix to use when connected through SSH
  local -r ssh_prefix='%{$fg_bold[green]%}%n@%m%{$reset_color%}:'

  # Display fancy symbol on darwin
  _prompt_symbol='$'
  if [[ "$OSTYPE" == darwin* ]]; then
    zmodload zsh/datetime
    add-zsh-hook precmd prompt_debian_precmd_symbol
  fi

  # Define prompts.
  PROMPT="${SSH_TTY:+$ssh_prefix}"'%{$fg_bold[blue]%}%~${vcs_info_msg_0_}%{$reset_color%}$_prompt_symbol '
}

prompt_debian_setup "$@"
